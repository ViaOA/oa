



 response.sendRedirect("/login.jsp");  // tells the browser to go to new url

instead of forward, which the webserver will return the output, but the browser will display the old url



<%@page trimDirectiveWhitespaces="true"%>

<%  // inside method java code
   if (!isAdmin) {
        // Note: response.sendRedirect() will keep processing the page.  jsp:forward will return from the page
        %>
            <jsp:forward page="empLogin.jsp" />
        <%
    }
    response.setContentType("text/csv");
    response.addHeader("Content-Disposition","attachment; filename=download.csv");
%>

<%!
    // outside method code, shared by all methods
    
%>





JSP tags
    http://www.tutorialspoint.com/jsp/page_directive.htm
    
    
Important NOTE:
    this is needed for includes to work
    
    <%@ page buffer="none" %>    
    
      ex:
         request.getRequestDispatcher("ssi.html").include(request, response);

    
    <%@ page buffer="8kb" %>


<%
    request.getRequestDispatcher("ssi.html").include(request, response);        
%>


    response.sendRedirect("someUrl");

<%
    if (user == null) {
        // Note: response.sendRedirect() will keep processing the page.  jsp:forward will return from the page
        %>
            <jsp:forward page="login.jsp" />
        <%
    }
%>

runs the page, outputs at current position
    <jsp:include page="includePageFooter.jsp" flush="true" />

inserts code at position
    <%@ include file="includePageFooter.jsp" %>


qqqqqqqqqqqqqqq

<%@ include file="oaheader.jsp" %>


<%
    String id = "login.jsp";

    form = oasession.getForm(id);

    if (form == null) {
        form = new OAForm(id) {
            public String afterPost(String forwardUrl) {
                return processSubmit(this, forwardUrl);
            }
        };
        JspDelegate.addForm(oasession, form);

        OATextField txt = new OATextField();
        form.put("txtUser",txt);

        txt = new OAPasswordField();
        form.put("txtPassword",txt);

        OACommand cmd = new OACommand();
        cmd.setUrl("my.jsp");
        form.put("cmdLogin", cmd);

        OALink lnk = new OALink("forgotLogin.jsp");
        form.put("cmdForgot", lnk);
    }
%>

<%!
    public String processSubmit(OAForm form, String forwardUrl) {
        String command = form.getLastCommand();
        if (command == null) return forwardUrl;

        OASession oasession = form.getSession();

        if (!command.equals("cmdLogin")) return forwardUrl;
        
        String userName = form.getTextField("txtUser").getText();
        String pw = form.getPasswordField("txtPassword").getText();

        User user = JspDelegate.getUser(userName, pw);

        JspDelegate.setUser(oasession, null);  // log out user

        if (user == null) {
            form.addError("Invalid User Id or Password");
            forwardUrl = "login.jsp";
        }
        else {
            JspDelegate.setUser(oasession, user);
        }
        return forwardUrl;
    }
%>


<jsp:include page="includeMessages.jsp" flush="true" />

<form method="post" action="<%=form.getAction()%>">


<jsp:include page="includePageFooter.jsp" flush="true" />


</body>
</html>  


