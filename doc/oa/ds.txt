

Recover all delete objects
    * might need to run twice, so that missing fkey exceptions will work
    
    
    public static void main(String[] args) throws Exception {

        DataSource ds = new DataSource("");
        OADataSourceJDBC oads = (OADataSourceJDBC) ds.getOADataSource();

        DataSource ds2 = new DataSource("database2");
        OADataSourceJDBC oads2 = (OADataSourceJDBC) ds2.getOADataSource();
        
        for (Table t : oads.getDatabase().getTables()) {
            Class c = t.getSupportClass();
            System.out.println("==> next class = "+c);
            if (c == null) continue;
            String s = c.getName();
            if (s.indexOf(".hifive.") < 0) continue;
            
            System.out.println("   select from database");
            TreeSet<Integer> tree = new TreeSet<Integer>();
            OASelect sel = new OASelect(c);
            sel.select();
            for ( ;sel.hasMore(); ) {
                OAObject obj = (OAObject) sel.next();
                Integer id = (Integer) obj.getProperty("Id");
                tree.add(id);
            }

            System.out.println("   loaded cnt="+tree.size()+", select from database2");
            oads.setEnabled(false);
            sel = new OASelect(c);
            sel.select();
            oads.setEnabled(true);
            for ( ;sel.hasMore(); ) {
                OAObject obj = (OAObject) sel.next();
                Integer id = (Integer) obj.getProperty("Id");
                if (tree.contains(id)) continue;
                System.out.println("   found one, id="+id);
                obj.setNew(true);
                obj.save();
            }
        }
        System.out.println("Done");
    }
    
